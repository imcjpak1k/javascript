<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>한글초성검색 테스트</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js">
    </script>
    <script type="text/javascript" src="https://unpkg.com/hangul-js">
    </script >
    <script type="text/javascript">
        $(function() { 
            init(); 

            initEvent();
        });

        // test data
        let data_list = [
            {name : '가락1동'},
            {name : '가락2동'},
            {name : '가락본동'},
            {name : '가리봉동'},
            {name : '가산동'},
            {name : '가양제1동'},
            {name : '가양제2동'},
            {name : '가양제3동'},
            {name : '가회동'},
            {name : '갈현제1동'},
            {name : '갈현제2동'},
            {name : '강일동'},
            {name : '개봉제1동'},
            {name : '개봉제2동'},
            {name : '개봉제3동'},
            {name : '개포1동'},
            {name : '개포2동'},
            {name : '개포4동'},
            {name : '거여1동'},
            {name : '거여2동'},
            {name : '고덕제1동'},
            {name : '고덕제2동'},
            {name : '고척제1동'},
            {name : '고척제2동'},
            {name : '공덕동'},
            {name : '공릉1동'},
            {name : '공릉2동'},
            {name : '공항동'},
            {name : '광장동'},
            {name : '광희동'},
            {name : '교남동'},
            {name : '구로제1동'},
            {name : '구로제2동'},
            {name : '구로제3동'},
            {name : '구로제4동'},
            {name : '구로제5동'},
            {name : '구산동'},
            {name : '구의제1동'},
            {name : '구의제2동'},
            {name : '구의제3동'},
            {name : '군자동'},
            {name : '금호1가동'},
            {name : '금호2.3가동'},
            {name : '금호4가동'},
            {name : '길동'},
            {name : '길음제1동'},
            {name : '길음제2동'},
            {name : '낙성대동'},
            {name : '난곡동'},
            {name : '난향동'},
            {name : '남가좌제1동'},
            {name : '남가좌제2동'},
            {name : '남영동'},
            {name : '남현동'},
            {name : '내곡동'},
            {name : '노량진제1동'},
            {name : '노량진제2동'},
            {name : '녹번동'},
            {name : '논현1동'},
            {name : '논현2동'},
            {name : '능동'},
            {name : '다산동'},
            {name : '답십리제1동'},
            {name : '답십리제2동'},
            {name : '당산제1동'},
            {name : '당산제2동'},
            {name : '대림제1동'},
            {name : '대림제2동'},
            {name : '대림제3동'},
            {name : '대방동'},
            {name : '대조동'},
            {name : '대치1동'},
            {name : '대치2동'},
            {name : '대치4동'},
            {name : '대학동'},
            {name : '대흥동'},
            {name : '도곡1동'},
            {name : '도곡2동'},
            {name : '도림동'},
            {name : '도봉제1동'},
            {name : '도봉제2동'},
            {name : '도화동'},
            {name : '독산제1동'},
            {name : '독산제2동'},
            {name : '독산제3동'},
            {name : '독산제4동'},
            {name : '돈암제1동'},
            {name : '돈암제2동'},
            {name : '동선동'},
            {name : '동화동'},
            {name : '둔촌제1동'},
            {name : '둔촌제2동'},
            {name : '등촌제1동'},
            {name : '등촌제2동'},
            {name : '등촌제3동'},
            {name : '마장동'},
            {name : '마천1동'},
            {name : '마천2동'},
            {name : '망우본동'},
            {name : '망우제3동'},
            {name : '망원제1동'},
            {name : '망원제2동'},
            {name : '면목본동'},
            {name : '면목제2동'},
            {name : '면목제3.8동'},
            {name : '면목제4동'},
            {name : '면목제5동'},
            {name : '면목제7동'},
            {name : '명동'},
            {name : '명일제1동'},
            {name : '명일제2동'},
            {name : '목1동'},
            {name : '목2동'},
            {name : '목3동'},
            {name : '목4동'},
            {name : '목5동'},
            {name : '무악동'},
            {name : '묵제1동'},
            {name : '묵제2동'},
            {name : '문래동'},
            {name : '문정1동'},
            {name : '문정2동'},
            {name : '미성동'},
            {name : '미아동'},
            {name : '반포1동'},
            {name : '반포2동'},
            {name : '반포3동'},
            {name : '반포4동'},
            {name : '반포본동'},
            {name : '발산제1동'},
            {name : '방배1동'},
            {name : '방배2동'},
            {name : '방배3동'},
            {name : '방배4동'},
            {name : '방배본동'},
            {name : '방이1동'},
            {name : '방이2동'},
            {name : '방학제1동'},
            {name : '방학제2동'},
            {name : '방학제3동'},
            {name : '방화제1동'},
            {name : '방화제2동'},
            {name : '방화제3동'},
            {name : '번1동'},
            {name : '번2동'},
            {name : '번3동'},
            {name : '보광동'},
            {name : '보라매동'},
            {name : '보문동'},
            {name : '부암동'},
            {name : '북가좌제1동'},
            {name : '북가좌제2동'},
            {name : '북아현동'},
            {name : '불광제1동'},
            {name : '불광제2동'},
            {name : '사근동'},
            {name : '사당제1동'},
            {name : '사당제2동'},
            {name : '사당제3동'},
            {name : '사당제4동'},
            {name : '사당제5동'},
            {name : '사직동'},
            {name : '삼각산동'},
            {name : '삼선동'},
            {name : '삼성1동'},
            {name : '삼성2동'},
            {name : '삼성동'},
            {name : '삼양동'},
            {name : '삼전동'},
            {name : '삼청동'},
            {name : '상계10동'},
            {name : '상계1동'},
            {name : '상계2동'},
            {name : '상계3.4동'},
            {name : '상계5동'},
            {name : '상계6.7동'},
            {name : '상계8동'},
            {name : '상계9동'},
            {name : '상도제1동'},
            {name : '상도제2동'},
            {name : '상도제3동'},
            {name : '상도제4동'},
            {name : '상봉제1동'},
            {name : '상봉제2동'},
            {name : '상암동'},
            {name : '상일동'},
            {name : '서강동'},
            {name : '서교동'},
            {name : '서림동'},
            {name : '서빙고동'},
            {name : '서원동'},
            {name : '서초1동'},
            {name : '서초2동'},
            {name : '서초3동'},
            {name : '서초4동'},
            {name : '석관동'},
            {name : '석촌동'},
            {name : '성내제1동'},
            {name : '성내제2동'},
            {name : '성내제3동'},
            {name : '성북동'},
            {name : '성산제1동'},
            {name : '성산제2동'},
            {name : '성수1가제1동'},
            {name : '성수1가제2동'},
            {name : '성수2가제1동'},
            {name : '성수2가제3동'},
            {name : '성현동'},
            {name : '세곡동'},
            {name : '소공동'},
            {name : '송정동'},
            {name : '송중동'},
            {name : '송천동'},
            {name : '송파1동'},
            {name : '송파2동'},
            {name : '수궁동'},
            {name : '수색동'},
            {name : '수서동'},
            {name : '수유1동'},
            {name : '수유2동'},
            {name : '수유3동'},
            {name : '숭인제1동'},
            {name : '숭인제2동'},
            {name : '시흥제1동'},
            {name : '시흥제2동'},
            {name : '시흥제3동'},
            {name : '시흥제4동'},
            {name : '시흥제5동'},
            {name : '신길제1동'},
            {name : '신길제3동'},
            {name : '신길제4동'},
            {name : '신길제5동'},
            {name : '신길제6동'},
            {name : '신길제7동'},
            {name : '신내1동'},
            {name : '신내2동'},
            {name : '신당동'},
            {name : '신당제5동'},
            {name : '신대방제1동'},
            {name : '신대방제2동'},
            {name : '신도림동'},
            {name : '신림동'},
            {name : '신사동'},
            {name : '신사제1동'},
            {name : '신사제2동'},
            {name : '신수동'},
            {name : '신원동'},
            {name : '신월1동'},
            {name : '신월2동'},
            {name : '신월3동'},
            {name : '신월4동'},
            {name : '신월5동'},
            {name : '신월6동'},
            {name : '신월7동'},
            {name : '신정1동'},
            {name : '신정2동'},
            {name : '신정3동'},
            {name : '신정4동'},
            {name : '신정6동'},
            {name : '신정7동'},
            {name : '신촌동'},
            {name : '쌍문제1동'},
            {name : '쌍문제2동'},
            {name : '쌍문제3동'},
            {name : '쌍문제4동'},
            {name : '아현동'},
            {name : '안암동'},
            {name : '암사제1동'},
            {name : '암사제2동'},
            {name : '암사제3동'},
            {name : '압구정동'},
            {name : '약수동'},
            {name : '양재1동'},
            {name : '양재2동'},
            {name : '양평제1동'},
            {name : '양평제2동'},
            {name : '여의동'},
            {name : '역삼1동'},
            {name : '역삼2동'},
            {name : '역촌동'},
            {name : '연남동'},
            {name : '연희동'},
            {name : '염리동'},
            {name : '염창동'},
            {name : '영등포동'},
            {name : '영등포본동'},
            {name : '오금동'},
            {name : '오류제1동'},
            {name : '오류제2동'},
            {name : '오륜동'},
            {name : '옥수동'},
            {name : '왕십리도선동'},
            {name : '왕십리제2동'},
            {name : '용강동'},
            {name : '용답동'},
            {name : '용문동'},
            {name : '용산2가동'},
            {name : '용신동'},
            {name : '우이동'},
            {name : '우장산동'},
            {name : '원효로제1동'},
            {name : '원효로제2동'},
            {name : '월계1동'},
            {name : '월계2동'},
            {name : '월계3동'},
            {name : '월곡제1동'},
            {name : '월곡제2동'},
            {name : '위례동'},
            {name : '은천동'},
            {name : '을지로동'},
            {name : '응봉동'},
            {name : '응암제1동'},
            {name : '응암제2동'},
            {name : '응암제3동'},
            {name : '이문제1동'},
            {name : '이문제2동'},
            {name : '이촌제1동'},
            {name : '이촌제2동'},
            {name : '이태원제1동'},
            {name : '이태원제2동'},
            {name : '이화동'},
            {name : '인수동'},
            {name : '인헌동'},
            {name : '일원1동'},
            {name : '일원2동'},
            {name : '일원본동'},
            {name : '자양제1동'},
            {name : '자양제2동'},
            {name : '자양제3동'},
            {name : '자양제4동'},
            {name : '잠실2동'},
            {name : '잠실3동'},
            {name : '잠실4동'},
            {name : '잠실6동'},
            {name : '잠실7동'},
            {name : '잠실본동'},
            {name : '잠원동'},
            {name : '장안제1동'},
            {name : '장안제2동'},
            {name : '장위제1동'},
            {name : '장위제2동'},
            {name : '장위제3동'},
            {name : '장지동'},
            {name : '장충동'},
            {name : '전농제1동'},
            {name : '전농제2동'},
            {name : '정릉제1동'},
            {name : '정릉제2동'},
            {name : '정릉제3동'},
            {name : '정릉제4동'},
            {name : '제기동'},
            {name : '조원동'},
            {name : '종로1.2.3.4가동'},
            {name : '종로5.6가동'},
            {name : '종암동'},
            {name : '중계1동'},
            {name : '중계2.3동'},
            {name : '중계4동'},
            {name : '중계본동'},
            {name : '중곡제1동'},
            {name : '중곡제2동'},
            {name : '중곡제3동'},
            {name : '중곡제4동'},
            {name : '중림동'},
            {name : '중앙동'},
            {name : '중화제1동'},
            {name : '중화제2동'},
            {name : '증산동'},
            {name : '진관동'},
            {name : '창신제1동'},
            {name : '창신제2동'},
            {name : '창신제3동'},
            {name : '창제1동'},
            {name : '창제2동'},
            {name : '창제3동'},
            {name : '창제4동'},
            {name : '창제5동'},
            {name : '천연동'},
            {name : '천호제1동'},
            {name : '천호제2동'},
            {name : '천호제3동'},
            {name : '청구동'},
            {name : '청담동'},
            {name : '청량리동'},
            {name : '청룡동'},
            {name : '청림동'},
            {name : '청운효자동'},
            {name : '청파동'},
            {name : '충현동'},
            {name : '평창동'},
            {name : '풍납1동'},
            {name : '풍납2동'},
            {name : '필동'},
            {name : '하계1동'},
            {name : '하계2동'},
            {name : '한강로동'},
            {name : '한남동'},
            {name : '합정동'},
            {name : '항동'},
            {name : '행당제1동'},
            {name : '행당제2동'},
            {name : '행운동'},
            {name : '혜화동'},
            {name : '홍은제1동'},
            {name : '홍은제2동'},
            {name : '홍제제1동'},
            {name : '홍제제2동'},
            {name : '홍제제3동'},
            {name : '화곡본동'},
            {name : '화곡제1동'},
            {name : '화곡제2동'},
            {name : '화곡제3동'},
            {name : '화곡제4동'},
            {name : '화곡제6동'},
            {name : '화곡제8동'},
            {name : '화양동'},
            {name : '황학동'},
            {name : '회기동'},
            {name : '회현동'},
            {name : '효창동'},
            {name : '후암동'},
            {name : '휘경제1동'},
            {name : '휘경제2동'},
            {name : '흑석동'},
        ];

        // 초성추출
        let get_cho = (str) => {
            let dis = Hangul.disassemble(str, true);
            // 초성추출 
            var cho = dis.reduce(function (prev, elem) {
                // 앞뒤공백제거
                let trimVal = str.replace(/^\s*|\s$/g, '');
                if(!trimVal) {
                    return prev;
                }

                elem = elem[0] ? elem[0] : elem;
                return prev + elem;
            }, ""); 

            return cho;
        };

        let init = () => { 
        // let ul = document.getElementById('find');
        let ul = $("#find");
            data_list.forEach(function(item, index){
                // 초성추출
                let cho = get_cho(item.name);
                
                // 초성입력
                item.disassembled = cho;
                
                // 출력
                ul.append(`<li> ${item.name} (${cho})`);
            });
        };

    let initEvent = () => {
        // 검색어 keyup
        $('#txt').bind('keyup', function() {
            let val = $(this).val();
            let cho = get_cho(val);

            let ul = $("#find");
            ul.html('');
            data_list.filter(function(item, index) {
                //console.log(item.name.includes(val) , item.disassembled.includes(cho), Hangul.search(item.name, val));
                return item.name.includes(val) || item.disassembled.includes(cho) || Hangul.search(item.name, val) != -1;
            })
            .forEach(function(item, index) {
                ul.append(`<li> ${item.name}`);
                /*
                let searchIndex = Hangul.search(item.name, val);
                if(searchIndex != -1) {
                    ul.append(`<li> ${item.name}`);
                }
                */
            });
        });
    };
    </script>
</head>
<body>
    검색어 : <input type="text" id="txt" />
    <ul id="find"></ul>
</body>
</html>